import {action, makeObservable, observable} from 'mobx';import {    CategoryType,    ChartDatasetLineType,    ChartDatasetPieType,    ParamsToChartDate} from '../Type/models';import {v1} from 'uuid';import {chartApi} from '../../api/api';import {HistoryStore} from '../HistoryStore/history-store';import {convertToDate, generateColor, getDateFormatTime} from "../../utils/utils";import { arrMonth } from '../../common/constants/constants';export class CategoriesStore extends HistoryStore {    categories: CategoryType[] = [        {_id: v1(), value: 'Eда', color: '#f2a5a5'},        {_id: v1(), value: 'Одежда', color: '#bd465c'},        {_id: v1(), value: 'Комунальные услуги', color: '#b346bd'},        {_id: v1(), value: 'Подарки', color: '#7346bd'},        {_id: v1(), value: 'Авто', color: '#3337a6'},        {_id: v1(), value: 'Развлечения', color: '#3369a6'},        {_id: v1(), value: 'Алкоголь', color: '#33a6a6'},        {_id: v1(), value: 'Никотин', color: '#072828'},        {_id: v1(), value: 'Другое', color: '#33a676'},        {_id: v1(), value: 'Бьюти', color: '#A6336D82'},        {_id: v1(), value: 'Транспорт', color: 'rgba(37,10,20,0.51)'},        {_id: v1(), value: 'Услуги', color: 'rgba(203,203,203,0.51)'},        {_id: v1(), value: 'Отдых', color: 'rgba(199,8,8,0.51)'},        {_id: v1(), value: 'Кредит', color: 'rgba(26,203,161,0.51)'},        {_id: v1(), value: 'Питомцы', color: 'rgba(43,5,169,0.51)'},        {_id: v1(), value: 'Хобби', color: 'rgba(241,240,246,0.51)'},    ];    selectedСategories: string[] = [];    walletChartId: string | undefined = '';    chartDataPie: ChartDatasetPieType[] = []    chartFilterDate: { year?: string, month?: string } = {        month: '',        year: ''    }    constructor() {        super();        makeObservable(this, {            selectedСategories: observable,            chartDataPie: observable,            chartFilterDate: observable,            walletChartId: observable,            setSelectedСategories: action,            getChartData: action,            setChartFilterDate: action,        });        this.setSelectedСategories = this.setSelectedСategories.bind(this);    }    setChartFilterDate(date: string) {        const currentDate = convertToDate(date)        this.chartFilterDate = {            year: currentDate.getFullYear().toString(),            month: arrMonth[currentDate.getMonth()].value        }    }    setSelectedСategories(newCategory: string): void {        const checkRepeatSelectedCategories = this.selectedСategories.find(            (category) => category === newCategory,        );        if (checkRepeatSelectedCategories) {            this.selectedСategories = this.selectedСategories.filter(                (category) => category !== checkRepeatSelectedCategories,            );        } else {            this.selectedСategories = [...this.selectedСategories, newCategory];        }    }    async getChartData(payload: ParamsToChartDate) {        const {data} = await chartApi.getChartData(payload);        if (payload.typeChart === 'pie') {            const result = []            this.categories.forEach((category) => {                this.chartDataPie = data.chartData.forEach((chartCategory) => {                    if (chartCategory.name === category.value) {                        return result.push({...chartCategory, color: category.color})                    }                })            })            this.chartDataPie = result        }        this.setChartFilterDate(data.date)    }    addСategory(category: CategoryType): void {        this.categories.push(category);        return;    }    removeСategory(idCategory: string): void {        const currentCategory = this.categories.findIndex((category) => category._id === idCategory);        this.categories.splice(currentCategory, 1);        return;    }    changeСategory(currentCategory: CategoryType): void {        this.categories.find((category) => {            if (category._id === currentCategory._id) {                category.value = currentCategory.value;            }        });        return;    }    setСategory(categories: CategoryType[]): void {        this.categories = categories;        return;    }}export default new CategoriesStore();